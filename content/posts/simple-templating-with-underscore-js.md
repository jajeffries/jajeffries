---
title: 'Simple templating with underscore.js'
date: Fri, 02 Jan 2015 17:00:00 +0000
draft: false
tags: []
---

I don't like frameworks. Frameworks get everywhere, leaving you stuck with a decision you made before you built whatever you're working on. You wouldn't couple parts of your code as tightly as some frameworks require you to be coupled to them. It's much better to be able to change things as you go along and as you learn more about your system. I prefer to use small libraries which I can compose together, preferably behind suitable abstractions. A good example of a library I regularly use is [underscore.js](http://underscorejs.org/). I use this in most of my projects because it saves me writing a lot of boiler plate (especially when dealing with collections) and makes my code more readable, making it easier for me to express my intent. As I have underscore in my project anyway, I may as well use it's [templating function](http://underscorejs.org/#template). It's pretty simple to use: \[code language="js"\] var compiled\_template = \_.template(''), result = compiled\_template({blah:'test'}); console.log(result); \[/code\] This will result in `'test'`, which we can attach to the DOM. In this example I've just passed a string straight into underscore's template function, but it's probably simpler for us to put this in HTML instead, especially with larger templates. We can do this by putting it in a script element. \[code language="js"\] <script id='list\_tmpl'> <ul> <% for(var i=0; i<my\_list.length; i++) { %> <li><%= my\_list\[i\] %></li> <%}%> </ul> </script> \[/code\] We can retrieve this by querying the DOM for the ID we've specified. \[code language="js"\] var list\_tmpl = document.getElementByID(list\_tmpl).innerHTML; \[/code\] So if we put everything together we get this simple function: \[code language="js"\] <script id='list\_tmpl'> <ul> <% for(var i=0; i<my\_list.length; i++) { %> <li><%= my\_list\[i\] %></li> <%}%> </ul> </script> function render(template\_id, data) { var tmpl = document.getElementByID(template\_id).innerHTML, compiled\_template = \_.template(tmpl), return compiled\_template(data); } var html = render('list\_tmpl', {my\_list:\[1, 2, 3, 4\]}); document.getElementByID('my\_list').innerHTML = html; <div id="my\_list"></div> \[/code\] Simple. I've used vanilla javascript here, but it should be easy enough to swap that out for jQuery or whatever you use for DOM manipulation instead.